---
title : 페이지네이션 (Pagination) 알고 사용하기
date : 2025-09-03 00:22:00 +9:00
categories : [Javascript]
tags : [Javascript, React]
---
## 1. 페이지네이션의 주요 개념
1. 페이지 크기(Page Size): 한 페이지에 표시할 데이터 항목의 수를 정의 한다. 페이지 크기가 10이면 한 페이지에 10개의 데이터 항목이 표시
2. 현재 페이지(Current Page): 사용자가 현재 보고 있는 페이지 번호
3. 총 페이지 수(Total Pages): 전체 데이터 항목 수와 페이지 크기를 기반으로 계산
4. 오프셋(Offset): 데이터베이스 쿼리에서 데이터를 가져올 때 시작 위치를 지정합니다. 페이지 2를 요청할 때 오프셋은 10 (페이지 크기 10 * (현재 페이지 2 - 1)).

## 2. 페이지네이션의 장점
1. 성능 향상: 한 번에 모든 데이터를 로드하지 않으므로, 네트워크 트래픽과 로딩 시간을 줄일 수 있다.
2. 사용자 경험 개선: 사용자가 필요한 정보를 빠르게 찾을 수 있도록 도와 줌.
3. 데이터베이스 부하 감소: 서버에서 처리해야 하는 데이터 양이 줄어들어 데이터베이스의 부하를 줄일 수 있다.
4. 일관성 유지: 특히 커서 기반 페이지네이션을 사용할 경우, 데이터의 추가나 삭제가 있어도 일관된 결과를 제공 함.

## 3. 페이지 네이션의 종류
### 1. 오프셋 기반 페이지네이션 (offset-based Pagination)
- 오프셋 기반 페이지네이션은 특정 페이지 번호에 해당하는 데이터를 요청하는 방식
- 이 방식은 구현이 간단하지만, 데이터가 추가되거나 삭제될 경우 페이지 번호가 변경되어 일관성이 떨어질 수 있다.
- 프론트엔드에서 명시적인 페이지 버튼과 함께 쓰이며, 버튼을 클릭함으로써 페이지를 휙휙 넘길 수 있다.
- 간단한 애플리케이션에서 주로 사용

```sql
SELECT * FROM table 
ORDER BY timestamp 
OFFSET 10
LIMIT 5
```

![image](../assets/screenshot/offset-pagenation.png)

### 2. 오프셋 페이지네이션의 단점 
1. 중복된 데이터 발생
- 쓰기 빈도가 빈번한 테이블인 경우, 데이터를 조회하는 도중에 데이터가 추가로 적재되어 다음 페이지를 눌렀지만, 이미 보았던 데이터가 중복될 수 있다.
- 이 사이에 데이터가 삭제된다면 다음 페이지 조회 시 없을 수 있다.

2. 성능 저하 - OFFSET 쿼리의 퍼포먼스 이슈
- offset pagination은 offset 위치를 계산하고, 필요한 데이터를 찾을 때까지 테이블을 전체 스캔한다. 즉 offset크기만큼 지정된 데이터를 모두 읽고 모두 지정된 갯수(limit만큼)를 순회하여 자르는 방식이다.
- 뒤페이지로 갈수록 버리지만 읽어야 할 행의 개수가 많아 점점 뒤로 갈수록 성능이 느려진다.
- 만약 DB 메모리보다 스캔해야하는 데이터가 더 커지는 경우 오류가 날 수 있다.


### 3. 커서 기반 페이지네이션
- 커서 기반 페이지네이션은 마지막으로 가져온 데이터의 고유 식별자(커서)를 사용하여 다음 데이터를 요청하는 방식
- 이 방식은 데이터의 추가나 삭제에 영향을 받지 않아 일관성이 높지만, 구현이 다소 복잡할 수 있다.
- OFFSET 파라미터를 인덱스로 전달하는 오프셋 페이징과 달리 커서 페이징은 조회가 중단된 마지막 페이지를 담은 커서라는 포인터(DataSet의 특정 레코드, 로우)를 파라미터로 전달한다. 

```javascript
// 요청 API 예시
fetch('https://api.example.com/products?limit=10&cursor=60b725f10c9c85c70d97880d');
```

- 인덱스가 적용된 값을 비교하기 때문에 테이블 풀스캔을 하지 않는다.
- 데이터 중복이 발생하지 않고, offset과 다르게 이전의 데이터를 읽지 않고 바로 다음 cursor에 대한 정보를 주면 되므로 대규모의 데이터를 다룰 때 좋다.


### 참고 문헌
- [참조 링크 1](https://bbbicb.tistory.com/40)
- [참조 링크 2](https://velog.io/@smm45108/Offset-%EA%B8%B0%EB%B0%98-%ED%8E%98%EC%9D%B4%EC%A7%80%EB%84%A4%EC%9D%B4%EC%85%98%EA%B3%BC-Cursor-%EA%B8%B0%EB%B0%98-%ED%8E%98%EC%9D%B4%EC%A7%80%EB%84%A4%EC%9D%B4%EC%85%98%EC%9D%98-URL-%EA%B5%AC%ED%98%84)
- [참조 링크 3](https://0soo.tistory.com/130)