---
title : 자바스크립트의 this와 렉시컬 스코프(Lexical Scope)
date : 2025-09-01 00:50:00 +9:00
categories : [Javascript]
tags : [Javascript]
---

## 1. 자바스크립트의 this
- 자바스크립트에서 this는 함수가 호출되는 방식에 따라 달라지는 특별한 키워드이다.
- this는 현재 실행 중인 컨텍스트(문맥)를 참조한다.

### 주요 특징
- 일반 함수 호출 : 전역 컨텍스트에서는 this가 window(브라우저 환경) 또는 global(Node.js 환경)을 가리 킴
- 메서드 호출 : 객체의 메서드로 호출하면, this는 그 객체를 가리 킴
- 생성자 함수 : new 키워드로 호출하면, this는 새로 생성된 인스턴스를 가리 킴
- 화살표 함수 : 화살표 함수는 자신만의 this를 가지지 않고, 상위 스코프의 this를 그대로 사용
- 이벤트 핸들러 : DOM 이벤트에서 this는 이벤트가 바인딩된 요소를 가리 킴

```javascript
function foo() {
  console.log(this);
}
foo(); // window 또는 global

const obj = {
  bar: function() {
    console.log(this);
  }
};
obj.bar(); // obj

function Person(name) {
  this.name = name;
}
const p = new Person('Tom');
console.log(p.name); // Tom

const arrow = () => {
  console.log(this);
};
arrow(); // 상위 스코프의 this
```


## 2. 렉시컬 스코프(Lexical Scope)
- 렉시컬 스코프(Lexical Scope)는 자바스크립트에서 변수의 유효 범위가 "코드가 작성된 위치"에 따라 결정되는 규칙이다. 
- 함수가 어디서 호출되는지가 아니라, 함수가 어디서 "정의"되었는지가 중요

### 동작 원리
- 자바스크립트 엔진은 코드를 해석할 때, 각 함수가 어디서 선언되었는지 기준으로 스코프 체인을 만든다.
- 함수 내부에서 변수를 찾을 때, 먼저 자신의 스코프(지역 변수)에서 찾고, 없으면 바깥(상위) 스코프로 올라가면서 찾음
- 이 과정을 "스코프 체인"이라고 한다.

```javascript
const a = 1;
function outer() {
  const b = 2;
  function inner() {
    const c = 3;
    console.log(a); // 1 (전역 스코프)
    console.log(b); // 2 (outer의 스코프)
    console.log(c); // 3 (inner의 스코프)
  }
  inner();
}
outer();
```

- inner 함수는 자신이 선언된 위치 기준으로 a, b, c 모두 접근할 수 있다.
- 만약 inner를 다른 곳에서 호출하더라도, 선언된 위치의 스코프 체인을 따라 변수에 접근 함

### 호출 위치와의 차이

```javascript
function foo() {
  const x = 10;
  function bar() {
    console.log(x);
  }
  return bar;
}
const baz = foo();
baz(); // 10
```

- baz는 bar 함수이지만, foo 함수가 끝난 뒤에 호출 됨
- 그럼에도 bar는 x에 접근할 수 있는데, 이것이 렉시컬 스코프와 클로저의 특징

### 렉시컬 스코프의 장점
- 코드의 가독성과 예측 가능성이 높아짐
- 함수가 어디서 호출되는지 신경 쓸 필요 없이, 선언된 위치만 보면 변수 접근 가능 여부를 알 수 있음
  
- 렉시컬 스코프는 "함수가 선언된 위치"를 기준으로 변수의 접근 범위를 결정한다. 실행 시점이 아니라, 코드 작성 시점에 스코프가 정해지므로, 복잡한 코드에서도 변수의 유효 범위를 쉽게 파악할 수 있다.